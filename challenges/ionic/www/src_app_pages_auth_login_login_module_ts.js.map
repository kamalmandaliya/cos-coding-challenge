{"version":3,"file":"src_app_pages_auth_login_login_module_ts.js","mappings":"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","sources":["./src/app/pages/auth/login/login-routing.module.ts","./src/app/pages/auth/login/login.module.ts","./src/app/pages/auth/login/login.page.ts","./src/app/services/alert/alert.service.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { LoginPage } from './login.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: LoginPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class LoginPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from '../../../shared/shared.module';\nimport { LoginPage } from './login.page';\nimport { LoginPageRoutingModule } from './login-routing.module';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, IonicModule, LoginPageRoutingModule, SharedModule],\n  declarations: [LoginPage],\n})\nexport class LoginPageModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { NavController, Platform } from '@ionic/angular';\nimport { Store } from '@ngxs/store';\nimport { ApiService } from '../../../services/api/api.service';\nimport { AuthAction } from '../../../core/auth-guard/auth-guard.actions';\nimport { catchError, map, tap } from 'rxjs';\nimport { AlertService } from '../../../services/alert/alert.service';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.page.html',\n  styleUrls: ['./login.page.scss'],\n})\nexport class LoginPage implements OnInit {\n  login: FormGroup;\n\n  constructor(\n    private showMessage: AlertService,\n    private apiService: ApiService,\n    private store: Store,\n    private navController: NavController,\n    private platform: Platform\n  ) {}\n  onLogin() {\n    const email = this.login.value.email;\n    const password = this.login.value.password;\n    return this.apiService\n      .put('https://api-core-dev.caronsale.de/api/v1/authentication/' + email, {\n        password,\n        meta: 'string',\n      })\n      .pipe(\n        map((results) => results),\n        catchError(async (error) => this.showAlertMessage(error))\n      )\n      .subscribe((data) => {\n        if (\n          data.authenticated === true &&\n          data.privileges === '{SALESMAN_USER}'\n        ) {\n          this.store.dispatch(\n            new AuthAction.Login(data.userId, data.token, data.authenticated)\n          );\n        } else {\n          this.showAlertMessage(data);\n        }\n      });\n  }\n  async showAlertMessage(data) {\n    console.log(data);\n    const alert = await this.showMessage.presentAlert({\n      header: 'Alert',\n      subHeader: data.error.msgKey,\n      message: data.error.message,\n      buttons: ['OK'],\n    });\n    await alert.present();\n  }\n  ngOnInit(): void {\n    this.login = new FormGroup({\n      email: new FormControl('buyer-challenge@caronsale.de', [\n        Validators.required,\n        Validators.email,\n      ]),\n      password: new FormControl('Test123.', [\n        Validators.required,\n        Validators.minLength(8),\n        Validators.maxLength(15),\n      ]),\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { AlertController } from '@ionic/angular';\nimport { AlertOptions } from '@ionic/core';\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AlertService {\n  constructor(private alertController: AlertController) {}\n\n  async presentAlert(opts?: AlertOptions): Promise<HTMLIonAlertElement> {\n    return await this.alertController.create(opts);\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}