{"version":3,"file":"src_app_tabs_main_main_module_ts.js","mappings":"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","sources":["./src/app/components/auction-cards/auction-cards.component.ts","./src/app/components/auction-cards/auction-cards.module.ts","./src/app/tabs/main/main-routing.module.ts","./src/app/tabs/main/main.module.ts","./src/app/tabs/main/main.page.ts","./src/app/tabs/main/main.selectors.ts","./node_modules/rxjs/dist/esm/internal/lastValueFrom.js"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { AuctionsModel } from '../../tabs/main/main.model';\n\n@Component({\n  selector: 'app-auction-cards',\n  templateUrl: './auction-cards.component.html',\n  styleUrls: ['./auction-cards.component.scss'],\n})\nexport class UsersPostsComponent implements OnInit {\n  @Input() isLoading = true;\n  @Input() auctions: AuctionsModel[];\n\n  constructor() {}\n\n  trackByPost(index) {\n    return index;\n  }\n\n  ngOnInit() {}\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { IonicModule } from '@ionic/angular';\nimport { SharedModule } from '../../shared/shared.module';\nimport { UsersPostsComponent } from './auction-cards.component';\n\n@NgModule({\n  imports: [CommonModule, IonicModule, SharedModule],\n  declarations: [UsersPostsComponent],\n  exports: [UsersPostsComponent],\n})\nexport class AuctionCardsComponentModule {}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { MainPage } from './main.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: MainPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class MainPageRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { SharedModule } from '../../shared/shared.module';\nimport { AuctionCardsComponentModule } from '../../components/auction-cards/auction-cards.module';\nimport { MainPage } from './main.page';\nimport { MainPageRoutingModule } from './main-routing.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    MainPageRoutingModule,\n    AuctionCardsComponentModule,\n    SharedModule,\n  ],\n  declarations: [MainPage],\n})\nexport class MainPageModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IonContent, IonInfiniteScroll, IonRefresher } from '@ionic/angular';\nimport { Select, Store } from '@ngxs/store';\nimport { lastValueFrom, Observable } from 'rxjs';\nimport { AppStoreModel } from '../../core/store';\nimport { FetchAuctionsActions } from './main.actions';\nimport { AuctionsModel } from './main.model';\nimport { selectAuctions, selectAuctionsIsLoading } from './main.selectors';\n\n@Component({\n  selector: 'app-main',\n  templateUrl: 'main.page.html',\n  styleUrls: ['main.page.scss'],\n})\nexport class MainPage implements OnInit {\n  @ViewChild(IonContent) ionContent: IonContent;\n  @ViewChild(IonRefresher) ionRefresher: IonRefresher;\n  @ViewChild(IonInfiniteScroll) infiniteScroll: IonInfiniteScroll;\n\n  @Select(selectAuctions()) auctions$: Observable<AuctionsModel[]>;\n  @Select(selectAuctionsIsLoading()) auctionsIsLoading$: Observable<boolean>;\n\n  constructor(private store: Store) {}\n\n  trackBy(index) {\n    return index;\n  }\n\n  async doRefresh(event) {\n    await lastValueFrom(\n      this.store.dispatch(new FetchAuctionsActions.FetchAuctions(1, true))\n    );\n    await this.ionRefresher.complete();\n  }\n\n  async loadDataAuctionsPagination(event) {\n    const activePage = this.store.selectSnapshot(\n      (state: AppStoreModel) => state.main.auctions.activePage\n    );\n    await lastValueFrom(\n      this.store.dispatch(\n        new FetchAuctionsActions.FetchAuctions(activePage + 1)\n      )\n    );\n    await this.infiniteScroll.complete();\n  }\n\n  async ngOnInit() {}\n\n  ionViewDidEnter() {\n    console.log(new FetchAuctionsActions.FetchAuctions(9));\n    const activePage = this.store.selectSnapshot(\n      (state: AppStoreModel) => state.main.auctions.activePage\n    );\n    this.store.dispatch([new FetchAuctionsActions.FetchAuctions(activePage)]);\n  }\n\n  ionViewDidLeave() {}\n}\n","import { createSelector } from '@ngxs/store';\nimport { MainPageStateModel } from './main.model';\nimport { MainPageState } from './main.state';\n\nexport const selectAuctions = () =>\n  createSelector([MainPageState], (state: MainPageStateModel) =>\n    state.auctions.pages\n      .map((key: number) => state.auctions.listData[key])\n      .reduce((a, b) => a.concat(b), [])\n  );\n\nexport const selectAuctionsIsLoading = () =>\n  createSelector(\n    [MainPageState],\n    (state: MainPageStateModel) => state.auctions.isLoading\n  );\n","import { EmptyError } from './util/EmptyError';\nexport function lastValueFrom(source, config) {\n    const hasConfig = typeof config === 'object';\n    return new Promise((resolve, reject) => {\n        let _hasValue = false;\n        let _value;\n        source.subscribe({\n            next: (value) => {\n                _value = value;\n                _hasValue = true;\n            },\n            error: reject,\n            complete: () => {\n                if (_hasValue) {\n                    resolve(_value);\n                }\n                else if (hasConfig) {\n                    resolve(config.defaultValue);\n                }\n                else {\n                    reject(new EmptyError());\n                }\n            },\n        });\n    });\n}\n"],"names":[],"sourceRoot":"webpack:///"}